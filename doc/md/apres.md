%title: Big Points: Uma AnÃ¡lise Baseada na Teoria dos Jogos
%author: Mateus Medeiros Furquim MendonÃ§a
%date: 2016-07-10






-> Big Points <-
================

-> Uma AnÃ¡lise Baseada na Teoria dos Jogos <-
---------------------------------------------






-> Autor: Mateus Medeiros Furquim MendonÃ§a

-> Orientador: Prof. Dr. Edson Alves da Costa JÃºnior

--------------------------------------------------------------------------------


-> IntroduÃ§Ã£o <-
================

-> Problema <-
--------------

^
* Encontrar balanceamento de jogos para _design_
    ^
    - Jogos EletrÃ´nicos
    ^    
    - Jogos de Tabuleiro


--------------------------------------------------------------------------------

-> IntroduÃ§Ã£o <-
================

-> Objetivos <-
---------------

^
* Realizar uma anÃ¡lise _Minimax_
^
* Verificar balanceamento do jogo _Big Points_
^
* Fornecer _insights_ para balanceamento em estruturas mais complexas

--------------------------------------------------------------------------------

-> Jogo Nim <-
==============

-> Regras Simplificadas <-
--------------------------

^
* Dois montes, com dois palitos em cada monte
^
* Escolhe um monte e retira quantos palitos quiser
^
* Jogador que retirar o Ãºltimo palito do jogo perde

--------------------------------------------------------------------------------

-> Jogo Nim <-
==============

-> Forma Extensa do Jogo Nim <-
-------------------------------

^
->                                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”                     <-
->    Jâ‚ â†’                                       Aâ”‚ â”ƒâ”ƒ â”ƒâ”ƒ â”‚                     <-
->                                                â””â”€â”€â”€â”€â”€â”€â”€â”˜                     <-
^
->                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           <-
->                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”       <-
->    Jâ‚‚ â†’                       Bâ”‚  â”ƒ â”ƒâ”ƒ â”‚                    Câ”‚ â”â” â”ƒâ”ƒ â”‚       <-
->                                â””â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”˜       <-
^
->                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”     <-
->               â”Œâ”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â” <-
->    Jâ‚ â†’      Dâ”‚ â”â” â”ƒâ”ƒ â”‚       Eâ”‚  â”ƒ â”ƒ  â”‚ Fâ”‚  â”ƒ â”â” â”‚    Gâ”‚ â”â” â”ƒ  â”‚ Hâ”‚ â”â” â”â” â”‚ <-
->               â””â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜ <-
^
->              â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”          â”‚          â”‚             â”‚                <-
->          â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”            <-
->    Jâ‚‚ â†’ Iâ”‚ â”â” â”ƒ  â”‚ Jâ”‚ â”â” â”â” â”‚ Kâ”‚  â”ƒ â”â” â”‚ Lâ”‚ â”â” â”â” â”‚    Mâ”‚ â”â” â”â” â”‚            <-
->          â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜            <-
^
->              â”‚                     â”‚                                         <-
->          â”Œâ”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”                                     <-
->    Jâ‚ â†’ Nâ”‚ â”â” â”â” â”‚            Oâ”‚ â”â” â”â” â”‚                                     <-
->          â””â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”˜                                     <-
^
->            (Jâ‚)       (Jâ‚‚)       (Jâ‚)       (Jâ‚‚)          (Jâ‚‚)       (Jâ‚)    <-

--------------------------------------------------------------------------------

-> Jogo Nim <-
==============

-> EstratÃ©gias Puras (Ïƒi) do Jogador 1 para o jogo Nim <-
---------------------------------------------------------

-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-
-> EstratÃ©gia   1Âº Turno   2Âº Turno   <-
-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-
^
->     Ïƒâ‚         (A,B)      (D,I)    <-
^
->     Ïƒâ‚‚         (A,B)      (D,J)    <-
^
->     Ïƒâ‚ƒ         (A,C)       â”€â”€â”€     <-
-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-

--------------------------------------------------------------------------------

-> Jogo Nim <-
==============

-> EstratÃ©gias Puras (Ï„j) do Jogador 2 para o jogo Nim <-
---------------------------------------------------------

-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-
-> EstratÃ©gia   1Âº Turno  <-
-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-
^
->     Ï„â‚         (B,D)   <-
->                (C,G)   <-
^
->                        <-
->     Ï„â‚‚         (B,E)   <-
->                (C,G)   <-
^
->                        <-
->     Ï„â‚ƒ         (B,F)   <-
->                (C,G)   <-
^
->                        <-
->     Ï„â‚„         (B,D)   <-
->                (C,H)   <-
^
->                        <-
->     Ï„â‚…         (B,E)   <-
->                (C,H)   <-
^
->                        <-
->     Ï„â‚†         (B,F)   <-
->                (C,H)   <-
-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-

--------------------------------------------------------------------------------

-> Jogo Nim <-
==============

-> Diferentes Jogos dependendo das estratÃ©gias Ïƒi e Ï„j <-
---------------------------------------------------------

^
-> Ïƒâ‚ e Ï„â‚ resultam no jogo Aâ†’Bâ†’Dâ†’Iâ†’N <-
^
-> Ïƒâ‚‚ e Ï„â‚ resultam no jogo Aâ†’Bâ†’Dâ†’J   <-
^
-> Ïƒâ‚ƒ e Ï„â‚‚ resultam no jogo Aâ†’Câ†’Gâ†’M   <-

--------------------------------------------------------------------------------

-> Jogo Nim <-
==============

-> Forma Normal para o jogo Nim <-
----------------------------------

-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-
->                 *Jâ‚‚*          <-
->          _Ï„â‚_ _Ï„â‚‚_ _Ï„â‚ƒ_ _Ï„â‚„_ _Ï„â‚…_ _Ï„â‚†_  <-
-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-
->      _Ïƒâ‚_   N  O  L  N  O  L   <-
->  *Jâ‚*  _Ïƒâ‚‚_   J  O  L  J  O  L   <-
->      _Ïƒâ‚ƒ_   M  M  M  H  H  H   <-
-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-

--------------------------------------------------------------------------------

-> Jogo Nim <-
==============

-> Matriz de Ganho <-
---------------------

-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-
->                 *Jâ‚‚*          <-
->          _Ï„â‚_ _Ï„â‚‚_ _Ï„â‚ƒ_ _Ï„â‚„_ _Ï„â‚…_ _Ï„â‚†_  <-
-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-
->      _Ïƒâ‚_   1  1 -1  1  1 -1   <-
->  *Jâ‚*  _Ïƒâ‚‚_  -1  1 -1 -1  1 -1   <-
->      _Ïƒâ‚ƒ_  -1 -1 -1  1  1  1   <-
-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-


--------------------------------------------------------------------------------

-> Jogo Nim <-
==============

-> AnÃ¡lise Minimax <-
---------------------

-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-
->                 *Jâ‚‚*              <-
->          _Ï„â‚_ _Ï„â‚‚_ _Ï„â‚ƒ_ _Ï„â‚„_ _Ï„â‚…_ _Ï„â‚†_ _min_  <-
-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-
->     _Ïƒâ‚_    1  1 -1  1  1 -1 *-1*   <-
->  *Jâ‚* _Ïƒâ‚‚_   -1  1 -1 -1  1 -1 *-1*   <-
->     _Ïƒâ‚ƒ_   -1 -1 -1  1  1  1 *-1*   <-
^
->     _max_   *1*  *1* *-1*  *1*  *1*  *1*      <-
-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-


--------------------------------------------------------------------------------

-> ProgramaÃ§Ã£o DinÃ¢mica <-
==========================

-> Conceito <-
--------------

^
- *TÃ©cnica* de programaÃ§Ã£o
^
- Reduz o *tempo* de processamento quando hÃ¡ *estados repetidos*
^
- AlcanÃ§a isso atravÃ©s da *memorizaÃ§Ã£o*

--------------------------------------------------------------------------------

-> ProgramaÃ§Ã£o DinÃ¢mica <-
==========================

-> ComparaÃ§Ã£o: CÃ³digo <-
------------------------

 1|int fibonacci(int n)
 2|{
 3|    int fib_number = 0;
 4|    
 5|    if (n<=2) {
 6|        fib_number = 1;
 7|    }
 8|    else {
 9|        fib_number = fibonacci(n-1) + fibonacci(n-2);
10|    }
11|
12|    return fib_number;
13|}

--------------------------------------------------------------------------------

-> ProgramaÃ§Ã£o DinÃ¢mica <-
==========================

-> Ãrvore de Fibonacci <-
-------------------------

->                         â”â”â”â”â”â”“                    <-
->                         â”ƒ Fâ‚™ â”ƒ                    <-
->                         â”—â”â”â”â”â”›                    <-
->                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            <-
->             â”â”â”â”â”â”â”â”“             â”Œâ”€â”€â”€â”€â”€â”€â”         <-
->             â”ƒ Fâ‚™â‚‹â‚ â”ƒ             â”‚ Fâ‚™â‚‹â‚‚ â”‚         <-
->             â”—â”â”â”â”â”â”â”›             â””â”€â”€â”€â”€â”€â”€â”˜         <-
->          â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”       <-
->      â”â”â”â”â”â”â”â”“     â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”    <-
->      â”ƒ Fâ‚™â‚‹â‚‚ â”ƒ     â”‚ Fâ‚™â‚‹â‚ƒ â”‚  â”‚ Fâ‚™â‚‹â‚ƒ â”‚  â”‚ Fâ‚™â‚‹â‚„ â”‚    <-
->      â”—â”â”â”â”â”â”â”›     â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜    <-
->     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                   <-
-> â”â”â”â”â”â”â”â”“  â”â”â”â”â”â”â”â”“                                <-
-> â”ƒ Fâ‚™â‚‹â‚ƒ â”ƒ  â”ƒ Fâ‚™â‚‹â‚„ â”ƒ                                <-
-> â”—â”â”â”â”â”â”â”›  â”—â”â”â”â”â”â”â”›                                <-

--------------------------------------------------------------------------------

-> ProgramaÃ§Ã£o DinÃ¢mica <-
==========================

-> ComparaÃ§Ã£o: CÃ³digo <-
------------------------

 1|std::map<int,int> memoization;
 2|
 3|int fibonacci(int n)
 4|{
 5|    auto it = memoization.find(n)
 6|    if (it != memoization.end()) {
 7|        return memoization.at(n);
 8|    }
 9|
10|    int fib_number = 0;
11|    
12|    if (n<=2) {
13|        fib_number = 1;
14|    }
15|    else {
16|        fib_number = fibonacci(n-1) + fibonacci(n-2);
17|    }
18|    
19|    memoization[n] = fib_number;
20|
21|    return fib_number;
22|}

--------------------------------------------------------------------------------

-> ProgramaÃ§Ã£o DinÃ¢mica <-
==========================

-> ComparaÃ§Ã£o: Tabela <-
------------------------

-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-
->  _n_-Ã©simo     Tempo (microsegundo)  <-
->            *Recursivo*  *MemorizaÃ§Ã£o*  <-
-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-
->      1        1.0        0.9      <-
->      2        0.6        5.2      <-
->      3        0.2        2.2      <-
->      4        0.4        2.0      <-
->      5        0.4        2.1      <-
->      6        0.6        2.5      <-
->      7        0.8        2.4      <-
->      8        1.0        2.5      <-
->      9        1.2        2.4      <-
->     10        2.0        2.4      <-
->     11        2.4        2.4      <-
->     12        3.6        2.6      <-
->     13        5.5        2.8      <-
->     14        8.8        2.9      <-
->     15       14.0        2.7      <-
-> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <-

--------------------------------------------------------------------------------

-> Regra do Jogo Big Points <-
==============================

-> ConteÃºdo <-
--------------

^
- 5 PeÃµes
^
- 60 Discos
^
    - 10 Discos das cores: Vermelha, Verde, Azul, Amarela e roxa
^
    - 5 Discos das cores: Branca e Preta
^
- 1 Escada com 5 degraus
^


-> OrganizaÃ§Ã£o <-
-----------------

^
- Retire um peÃ£o de cada cor comum e coloque ao lado da escada
^
- Embaralhe os discos restantes e forme uma fila
^
- Coloque os peÃµes em uma ponta e a escada na ponta oposta
^

--------------------------------------------------------------------------------

-> Regra do Jogo Big Points <-
==============================

-> MecÃ¢nica <-
--------------

^
- Escolha o primeiro jogador
^
- Na sua vez, o jogador deve escolher uma cor de peÃ£o
^
- Mova aquele peÃ£o para o prÃ³ximo disco da cor dele em direÃ§Ã£o Ã  escada
^
    - Se nÃ£o houver mais discos da sua cor na sua frente, mova-o para a escada
^
- Pegue o prÃ³ximo disco disponÃ­vel Ã  frente ou atrÃ¡s do peÃ£o
^
- Se tiver uma peÃ§a preta, pode utilizÃ¡-la para realizar uma segunda jogada
^
    - Esta jogada pode ser com qualquer cor e pode ser para trÃ¡s
^
    - ApÃ³s mover o peÃ£o, pegue um disco Ã  frente ou atrÃ¡s do peÃ£o
^
- Passe a vez para o prÃ³ximo jogador
^
- O jogo termina quando todos os peÃµes estiverem na escada
^


-> PontuaÃ§Ã£o <-
---------------

^
- A pontuaÃ§Ã£o Ã© igual Ã  quantidade de discos de cada cor e multiplicado pelo seu valor
^
    - Os peÃµes na escada indicam o valor das cores, de forma que o primeiro a chegar vale quatro, e o Ãºlimo, zero
^
    - O branco vale o nÃºmero de cores distintas (sem contar com o branco)
^
    - O preto vale zero pontos

--------------------------------------------------------------------------------

-> AnÃ¡lise do Jogo Big Points <-
================================

-> Quantidade de Partidas <-
----------------------------

^
-> P = (J-1)â›Dtââ›D1ââ›D2ââ›D3ââ›D4ââ›D5ââ›D6â                       <-
->          âNwâ âNkâ âNrâ âNgâ âNbâ âNyâ âNpâ                        <-

^
-> P = (5-1)â›55ââ›50ââ›45ââ›36ââ›27ââ›18ââ›9â                        <-
->          â5 â â5 â â9 â â9 â â9 â â9 â â9â                         <-

^
-> P = 560.483.776.167.774.018.942.304.261.616.685.408.000.000 <-

^
-> P = 5x10â´Â¹                                                  <-

^
-> Quantidade de Estados <-
---------------------------

^
-> E = âˆ‘Ê°â‚™â‚Œâ‚€ğ‘“â¿ â‰ˆ 341,    ğ‘“=4,  h=4  <-

^
-> E = âˆ‘Ê°â‚™â‚Œâ‚€ğ‘“â¿ â‰ˆ 3x10â·Â¹, ğ‘“=20, h=55 <-


^
-> Para Resolver Todos as Partidas <-
-------------------------------------

^
-> T â‰ˆ Pâ‹…E â‰ˆ 5x10â´Â¹â‹…3x10â·Â¹ â‰ˆ 1x10Â¹Â¹Â³ <-


--------------------------------------------------------------------------------

-> AnÃ¡lise do Jogo Big Points <-
================================

-> Quantidade de Estados <-
---------------------------

->      â”Œâ”€â”€â”€â”€â”€â”€â”€â”                               <-
-> Jâ‚ â†’ â”‚1221 00â”‚                               <-
->      â”‚00   00â”‚                               <-
->      â””â”€â”€â”€â”€â”€â”€â”€â”˜                               <-
^      
->          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               <-
->      â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”           <-
-> Jâ‚‚ â†’ â”‚R021 00â”‚ â”‚1G01 00â”‚ â”‚0G21 00â”‚           <-
->      â”‚01   00â”‚ â”‚01   00â”‚ â”‚10   00â”‚           <-
->      â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜           <-
^
->          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               <-
->      â”Œâ”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”           <-
-> Jâ‚ â†’ â”‚100R 00â”‚           â”‚R0G0 00â”‚           <-
->      â”‚01   01â”‚           â”‚01   10â”‚           <-
->      â””â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”˜           <-
^      
->          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     <-
->      â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” <-
-> Jâ‚‚ â†’ â”‚1001 10â”‚ â”‚100R 01â”‚ â”‚10G0 10â”‚ â”‚R020 01â”‚ <-
->      â”‚11   01â”‚ â”‚02   01â”‚ â”‚11   10â”‚ â”‚02   10â”‚ <-
->      â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ <-
^
->          â”‚         â”‚         â”‚         â”‚     <-
->      â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” <-
-> Jâ‚ â†’ â”‚1001 12â”‚ â”‚1001 21â”‚ â”‚1020 12â”‚ â”‚1020 21â”‚ <-
->      â”‚11   02â”‚ â”‚02   11â”‚ â”‚11   11â”‚ â”‚02   20â”‚ <-
->      â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ <-
^      
->        (1,0)     (2,1)     (1,1)     (2,0)   <-
       
--------------------------------------------------------------------------------

-> Estrutura de Armazenamento <-
================================

^
-> Tabuleiro <-
---------------

^
-> tabuleiro = ncâ‹…nd              <- 
^
-> tabuleiro = 5â‹…4                <- 
^
-> tabuleiro = 20 bits            <- 

^
-> Peao <-
----------

^
-> peao = âŒˆlogâ‚‚(nd+1)âŒ‰â‹…nc         <- 
^
-> peao = âŒˆlogâ‚‚(4+1)âŒ‰â‹…5           <- 
^
-> peao = 3â‹…5                     <- 
^
-> peao = 15 bits                 <- 

^
-> Escada <-
------------

^
-> escada = âŒˆlogâ‚‚(np)âŒ‰â‹…np       <- 
^
-> escada = âŒˆlogâ‚‚(5)âŒ‰â‹…5           <- 
^
-> escada = 15 bits               <- 

^
-> Jogadores <-
---------------

^
-> jogadores = âŒˆlogâ‚‚(nd+1)âŒ‰â‹…ncâ‹…nj <- 
^
-> jogadores = âŒˆlogâ‚‚(4+1)âŒ‰â‹…5â‹…2    <- 
^
-> jogadores = 3â‹…5â‹…2              <- 
^
-> jogadores = 30 bits            <- 

^
-> Jogador Atual <-
-------------------

^
-> jogadores = âŒˆlogâ‚‚(2)âŒ‰          <- 
^
-> tabuleiro = 1 bits             <- 

--------------------------------------------------------------------------------

-> Estrutura de Armazenamento <-
================================

-> ImplementaÃ§Ã£o <-
-------------------

 1|using namespace std;                                            
 2|                                                                
 3|using ll = unsigned long long;                                  
 4|                                                                
 5|struct State                                                    
 6|{                                                               
 7|    struct {                                                    
 8|        ll \_tabuleiro :20;                                      
 9|        ll \_peao :15;                                           
10|        ll \_escada :15;                                         
11|    };                                                          
12|                                                                
13|    struct {                                                    
14|        ll \_jogadores :30;                                      
15|        ll \_atual :1;                                           
16|    };                                                          
17|   State(int mtabuleiro = (1<<20)-1, int mpeao = 0, int mescada = 0,
18|       int mjogadores = 0, int matual = 0)    : \_tabuleiro(mtabuleiro),
19|       \_peao(mpeao), \_escada(mescada),    \_jogadores(mjogadores),
20|       \_atual(matual)
21|   {
22|   }

--------------------------------------------------------------------------------

-> Estrutura de Armazenamento <-
================================

-> ImplementaÃ§Ã£o <-
-------------------

1|
2|   int tabuleiro (int pos) const {
3|       return (\_tabuleiro & (1<<pos))>>pos;
4|   }
5|   
6|   void settabuleiro (int pos, int available) {
7|       \_tabuleiro = (\_tabuleiro & ~(1<<pos)) | ((available&1)<<pos);
8|   }

--------------------------------------------------------------------------------

-> Estrutura de Armazenamento <-
================================

-> ImplementaÃ§Ã£o <-
-------------------

 1|    int peao (int cor) const {
 2|        return (\_peao & (7<<(3\*cor)))>>(3\*cor);
 3|    }
 4|    
 5|    void setpeao (int cor, int pos) {
 6|        \_peao = (\_peao&~(7<<(3\*cor)))|((pos&7)<<(3\*cor));
 7|    }
 8|    
 9|    void movepeao (int cor) {
10|        setpeao(cor,peao(cor)+1);
11|    }

--------------------------------------------------------------------------------

-> Estrutura de Armazenamento <-
================================

-> ImplementaÃ§Ã£o <-
-------------------

1|    int escada (int cor) const {
2|        return (\_escada & (7<<(3\*cor)))>>(3\*cor);
3|    }
4|   
5|   void setescada (int cor, int pos) {
6|       \_escada = (\_escada&~(7<<(3\*cor)))|((pos&7)<<(3\*cor));
7|   }

--------------------------------------------------------------------------------

-> Estrutura de Armazenamento <-
================================

-> ImplementaÃ§Ã£o <-
-------------------

 1|   int jogador (int jogador, int cor) const {
 2|       return ((\_jogadores>>(15\*jogador)) & (7<<(3\*cor)))>>(3\*cor);
 3|   }
 4|   
 5|   void setjogador (int jogador, int cor, int qtd) {
 6|       \_jogadores = (\_jogadores & ~(7<<(3\*cor + 15\*jogador) ))
 7|           | ((qtd & 7) << (3\*cor + 15\*jogador));
 8|   }
 9|   
10|   void updatejogador (int player, int cor) {
11|       setjogador(player, cor, jogador(player, cor)+1);
12|   }

--------------------------------------------------------------------------------

-> Estrutura de Armazenamento <-
================================

-> ImplementaÃ§Ã£o <-
-------------------

1|   int atual () const {
2|       return \_atual;
3|   }
4|   
5|   void updateatual () {
6|       \_atual ^= 1;
7|   }

--------------------------------------------------------------------------------

-> Estrutura de Armazenamento <-
================================

-> ImplementaÃ§Ã£o <-
-------------------

1|   bool operator<(const struct State& s) const {
2|       if (\_tabuleiro != s.\_tabuleiro) return \_tabuleiro < s.\_tabuleiro;
3|       if (\_peao != s.\_peao) return \_peao < s.\_peao;
4|       if (\_escada != s.\_escada) return \_escada < s.\_escada;
5|       if (\_jogadores != s.\_jogadores) return \_jogadores < s.\_jogadores;
6|       return \_atual < s.\_atual;
7|   }

--------------------------------------------------------------------------------

-> ProgramaÃ§Ã£o DinÃ¢mica <-
==========================

-> ImplementaÃ§Ã£o <-
-------------------

 1|ii dp(map<struct State,ii>& dp\_states, struct Game game, struct State state)
 2|{
 3|    // If all pawns are in the stair
 4|    if (is\_pawns\_stair(game, state)) {
 5|        return calculate\_score(game, state);
 6|    }
 7|
 8|    auto it = dp\_states.find(state);
 9|    if (it != dp\_states.end()) {
10|        return dp\_states[state];
11|    }
12|
13|    vector<ii> results;
14|    for (short pawn = 0; pawn < game.num\_cores; pawn++) {
15|        struct Turn right(state.atual(), pawn, true);
16|        struct Turn left(state.atual(), pawn, false);
17|
18|        // DP apÃ³s jogadas
19|        game\_res result = play(dp\_states, game, state, left);
20|        if (result.first) {
21|            results.push\_back(result.second);
22|       }
23|
24|       result = play(dp\_states, game, state, right);
25|       if (result.first) {
26|           results.push\_back(result.second);
27|       }
28|   }

--------------------------------------------------------------------------------

-> Minimax <-
=============

-> ImplementaÃ§Ã£o: Jogador 1 <-
------------------------------

 1|    auto p1\_order = (const ii& a, const ii& b){
 2|        if (a.first > a.second) {
 3|            if (b.first > b.second) {
 4|                return a.first > b.first ? true : false;
 5|            }
 6|            else {
 7|                return true;
 8|            }
 9|        }
10|        else if (a.first == a.second) {
11|            if (b.first > b.second) {
12|                return false;
13|            }
14|            else if (b.first == b.second) {
15|                return a.first > b.first ? true : false;
16|            }
17|            else {
18|                return true;
19|            }
20|        }
21|        else {
22|            if (b.first >= b.second) {
23|                return false;
24|            }
25|            else {
26|                return a.second < b.second ? true : false;
27|            }
28|        }
29|      };

--------------------------------------------------------------------------------

-> Minimax <-
=============

-> ImplementaÃ§Ã£o: Jogador 2 <-
------------------------------

30|  
31|      auto p2\_order = (const ii& a, const ii& b){
32|          if (a.second > a.first) {
33|              if (b.second > b.first) {
34|                  return a.second > b.second ? true : false;
35|              }
36|              else {
37|                  return true;
38|              }
39|          }
40|          else if (a.second == a.first) {
41|              if (b.second > b.first) {
42|                  return false;
43|              }
44|              else if (b.second == b.first) {
45|                  return a.second > b.second ? true : false;
46|              }
47|              else {
48|                  return true;
49|              }
50|          }
51|          else {
52|              if (b.second >= b.first) {
53|                  return false;
54|              }
55|              else {
56|                  return a.first < b.first ? true : false;
57|              }
58|          }
59|      };

--------------------------------------------------------------------------------

-> Resultados <-
================

